class l{preloaderElement;constructor(){this.preloaderElement=document.querySelector(".preloader"),this.initPreloader()}initPreloader(){document.addEventListener("loadingIsFinished",e=>{if(!this.preloaderElement)return;let d=0;if(e.detail){const r=document.querySelectorAll(`.${e.detail.block} img`);if(r.length===0){this.hidePreloader();return}r.forEach(t=>{t.complete&&(d+=1,this.checkAndHidePreloader(e,d)),t.onload=()=>{d+=1,this.checkAndHidePreloader(e,d)}})}})}checkAndHidePreloader(e,d){e.detail?.requiredImagesCount&&d>=e.detail.requiredImagesCount&&this.hidePreloader()}hidePreloader(){this.preloaderElement&&this.preloaderElement.classList.add("hidden")}}class o{static stop(e=""){const r=document.querySelectorAll("."+e+" img").length,t=new CustomEvent("loadingIsFinished",{detail:{block:e,requiredImagesCount:r}});document.dispatchEvent(t)}}export{o as L,l as P};
